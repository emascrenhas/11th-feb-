<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Promise Diary for Ruchi üìñ‚ù§Ô∏è</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Homemade+Apple&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0;
      padding: 0;
      background: #2b1d14;
      font-family: "Inter", sans-serif;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      color: #2a1b12;
    }

    /* ---------- COVER SCREEN ---------- */
    .cover-screen {
      position: absolute;
      inset: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      background: radial-gradient(circle at top, #3a2619, #1b100a);
      z-index: 20;
      flex-direction: column;
      padding: 20px;
      text-align: center;
    }

    .cover-book {
      width: 320px;
      height: 440px;
      background: linear-gradient(145deg, #5a2f1a, #2d140a);
      border-radius: 18px;
      box-shadow: 0px 25px 60px rgba(0,0,0,0.7);
      border: 2px solid rgba(255,255,255,0.15);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
      overflow: hidden;
    }

    .cover-book::before {
      content: "";
      position: absolute;
      inset: 0;
      background: url("https://www.transparenttextures.com/patterns/leather.png");
      opacity: 0.25;
    }

    .cover-title {
      font-family: "Homemade Apple", cursive;
      font-size: 1.9rem;
      color: #f4d7a4;
      z-index: 2;
      margin-bottom: 10px;
    }

    .cover-sub {
      font-size: 1rem;
      color: rgba(244, 215, 164, 0.85);
      z-index: 2;
      margin-top: 5px;
    }

    .open-btn {
      margin-top: 25px;
      padding: 14px 28px;
      border: none;
      border-radius: 40px;
      background: #f4d7a4;
      color: #1b100a;
      font-weight: 600;
      cursor: pointer;
      font-size: 1rem;
      transition: 0.3s;
      box-shadow: 0px 12px 25px rgba(0,0,0,0.6);
    }

    .open-btn:hover {
      transform: scale(1.06);
      background: #ffdcae;
    }

    /* ---------- BOOK WRAPPER ---------- */
    .book-wrapper {
      width: 90%;
      max-width: 900px;
      height: 520px;
      perspective: 1600px;
      display: none;
      position: relative;
    }

    .book {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
    }

    /* ---------- PAGES ---------- */
    .page {
      width: 50%;
      height: 100%;
      position: absolute;
      top: 0;
      overflow: hidden;
      background: #f7f0df;
      border-radius: 12px;
      box-shadow: inset 0px 0px 25px rgba(0,0,0,0.08);
      border: 1px solid rgba(0,0,0,0.08);
      background-image: url("https://www.transparenttextures.com/patterns/paper-fibers.png");
    }

    .left-page {
      left: 0;
      border-right: 2px solid rgba(0,0,0,0.12);
    }

    .right-page {
      right: 0;
      border-left: 2px solid rgba(0,0,0,0.12);
    }

    /* ---------- CONTENT ---------- */
    .page-content {
      padding: 35px 28px;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      position: relative;
    }

    .page-title {
      font-family: "Homemade Apple", cursive;
      font-size: 1.3rem;
      margin-bottom: 20px;
      color: #3b2418;
    }

    .page-text {
      font-family: "Homemade Apple", cursive;
      font-size: 1.1rem;
      line-height: 1.9;
      color: #2a1b12;
      white-space: pre-line;
      flex: 1;
    }

    /* ---------- PHOTO STYLE (printed in diary) ---------- */
    .photo {
      width: 140px;
      height: 120px;
      object-fit: cover;
      border-radius: 10px;
      box-shadow: 0px 10px 18px rgba(0,0,0,0.25);
      border: 2px solid rgba(255,255,255,0.6);
      filter: contrast(0.95) saturate(0.9);
      background: rgba(255,255,255,0.4);
    }

    .photo.small {
      width: 110px;
      height: 95px;
    }

    /* ---------- PHOTO LAYOUTS ---------- */
    .layout-top-center {
      align-items: center;
    }

    .layout-top-center .photo-wrap {
      margin-bottom: 18px;
    }

    .layout-side-right {
      flex-direction: row;
      gap: 18px;
    }

    .layout-side-right .page-text {
      flex: 1;
    }

    .layout-side-right .photo-wrap {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }

    .layout-side-left {
      flex-direction: row;
      gap: 18px;
    }

    .layout-side-left .photo-wrap {
      order: -1;
      display: flex;
      flex-direction: column;
    }

    .layout-bottom-left {
      position: relative;
    }

    .layout-bottom-left .photo-wrap {
      position: absolute;
      bottom: 35px;
      left: 25px;
      transform: rotate(-4deg);
    }

    .layout-bottom-right {
      position: relative;
    }

    .layout-bottom-right .photo-wrap {
      position: absolute;
      bottom: 35px;
      right: 25px;
      transform: rotate(4deg);
    }

    .layout-two-photos {
      position: relative;
    }

    .layout-two-photos .photo-wrap {
      position: absolute;
      top: 70px;
      right: 25px;
      transform: rotate(5deg);
    }

    .layout-two-photos .photo-wrap.second {
      top: 230px;
      left: 25px;
      transform: rotate(-6deg);
    }

    /* ---------- FLIP PAGE (RIGHT PAGE FLIPS TO LEFT) ---------- */
    .flip-page {
      width: 50%;
      height: 100%;
      position: absolute;
      top: 0;
      right: 0;
      transform-origin: left center;
      transform-style: preserve-3d;
      z-index: 10;
      border-radius: 12px;
    }

    .flip-front,
    .flip-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 12px;
      overflow: hidden;
      background: #f7f0df;
      border-left: 2px solid rgba(0,0,0,0.12);
      box-shadow: inset 0px 0px 25px rgba(0,0,0,0.08);
      background-image: url("https://www.transparenttextures.com/patterns/paper-fibers.png");
    }

    .flip-front {
      transform: rotateY(0deg);
    }

    .flip-back {
      transform: rotateY(180deg);
      border-left: none;
      border-right: 2px solid rgba(0,0,0,0.12);
    }

    .flipping {
      animation: flipAnim 0.9s ease-in-out forwards;
    }

    @keyframes flipAnim {
      0% { transform: rotateY(0deg); }
      100% { transform: rotateY(-180deg); }
    }

    /* ---------- CONTROLS ---------- */
    .controls {
      position: absolute;
      bottom: -55px;
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 10px;
      color: rgba(255,255,255,0.8);
      font-size: 0.9rem;
      user-select: none;
    }

    .nav-btn {
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.25);
      color: rgba(255,255,255,0.85);
      padding: 10px 18px;
      border-radius: 30px;
      cursor: pointer;
      transition: 0.25s;
      font-weight: 500;
    }

    .nav-btn:hover {
      background: rgba(255,255,255,0.2);
    }

    .hint {
      position: absolute;
      top: -38px;
      width: 100%;
      text-align: center;
      color: rgba(255,255,255,0.8);
      font-size: 0.9rem;
    }

    /* ---------- MOBILE ---------- */
    @media(max-width: 768px) {
      .book-wrapper {
        height: 480px;
      }

      .page-content {
        padding: 25px 18px;
      }

      .page-text {
        font-size: 1rem;
      }

      .photo {
        width: 110px;
        height: 95px;
      }
    }
  </style>
</head>

<body>

  <!-- Background Music -->
  <audio id="bgMusic" loop>
    <source src="music.mp3" type="audio/mpeg">
  </audio>

  <!-- Cover Screen -->
  <div class="cover-screen" id="coverScreen">
    <div class="cover-book">
      <div class="cover-title">Promise Diary</div>
      <div class="cover-sub">For Ruchi ‚ù§Ô∏è</div>
      <div class="cover-sub" style="margin-top:12px;">‚Äî By Yash</div>
    </div>

    <button class="open-btn" onclick="openDiary()">Open the Diary üìñ</button>
  </div>

  <!-- Book -->
  <div class="book-wrapper" id="bookWrapper">
    <div class="hint">Swipe left/right or use buttons to turn pages ‚ú®</div>

    <div class="book" id="book">

      <!-- Static Left Page -->
      <div class="page left-page">
        <div class="page-content" id="leftContent"></div>
      </div>

      <!-- Static Right Page -->
      <div class="page right-page">
        <div class="page-content" id="rightContent"></div>
      </div>

      <!-- Flip Page (animated) -->
      <div class="flip-page" id="flipPage" style="display:none;">
        <div class="flip-front">
          <div class="page-content" id="flipFrontContent"></div>
        </div>
        <div class="flip-back">
          <div class="page-content" id="flipBackContent"></div>
        </div>
      </div>

    </div>

    <div class="controls">
      <button class="nav-btn" onclick="prevSpread()">‚¨Ö Back</button>
      <div id="pageIndicator">Spread 1</div>
      <button class="nav-btn" onclick="nextSpread()">Next ‚û°</button>
    </div>
  </div>

  <script>
    const music = document.getElementById("bgMusic");

    const pages = [
      { title: "Promise #1", text: `Ruchi... I promise I‚Äôll always choose you. Even in chaos. Even in silence. Even in the hardest days. Always you.`, layout: "top-center", photos: ["photo1.jpg"] },

      { title: "Promise #2", text: `I promise to always listen. Not just to your words... But to your moods. Your eyes. Your silence. Because you deserve to be understood.`, layout: "side-right", photos: ["photo2.jpg"] },

      { title: "Promise #3", text: `Ruchi, I promise to make you laugh. Even when life feels heavy. And yes... I‚Äôll annoy you a little too üòå‚ù§Ô∏è`, layout: "bottom-left", photos: ["photo3.jpg"] },

      { title: "Promise #4", text: `I promise to be proud of you. In every phase. In every version. Even when you doubt yourself... I won‚Äôt.`, layout: "side-left", photos: ["photo4.jpg"] },

      { title: "Promise #5", text: `I promise to protect your peace. Not by controlling your world... But by being the calm inside it.`, layout: "top-center", photos: ["photo5.jpg", "photo6.jpg"] },

      { title: "Promise #6", text: `Ruchi... I promise that your happiness will never feel like a burden to me. I want to be part of it.`, layout: "bottom-right", photos: ["photo7.jpg"] },

      { title: "Promise #7", text: `I promise I‚Äôll stay. Not only when things are cute... But also when things are messy. Because love is not temporary.`, layout: "side-right", photos: ["photo8.jpg"] },

      { title: "Promise #8", text: `I promise to hold your hand. In public. In private. In every storm. Ruchi, you won‚Äôt walk alone.`, layout: "top-center", photos: ["photo9.jpg"] },

      { title: "Promise #9", text: `I promise to love you softly. Not loudly. Not dramatically. But in a way that feels safe. And forever.`, layout: "bottom-left", photos: ["photo10.jpg"] },

      { title: "Promise #10", text: `Ruchi...My final promise is simple: I will never stop loving you. Not today. Not tomorrow. Not in any lifetime. ‚Äî Yours, Yash ‚ù§Ô∏è`, layout: "two-photos", photos: ["photo11.jpg", "photo12.jpg"] },

      { title: "", text: "", layout: "blank", photos: [] },
      { title: "", text: "", layout: "blank", photos: [] },
      { title: "", text: "", layout: "blank", photos: [] },

      { title: "", text: `More promises will be written soon‚Ä¶ ‚úçÔ∏è‚ù§Ô∏è`, layout: "top-center", photos: [] }
    ];

    // Spreads: each spread = [leftPageIndex, rightPageIndex]
    // Spread 1: left blank, right = Promise #1
    // Spread 2: left = Promise #2, right = Promise #3
    // ...
    const spreads = [];
    spreads.push([null, 0]); // first spread: left blank, right promise #1

    let i = 1;
    while (i < pages.length) {
      spreads.push([i, i + 1]);
      i += 2;
    }

    let currentSpread = 0;
    let flipping = false;

    const leftContent = document.getElementById("leftContent");
    const rightContent = document.getElementById("rightContent");

    const flipPage = document.getElementById("flipPage");
    const flipFrontContent = document.getElementById("flipFrontContent");
    const flipBackContent = document.getElementById("flipBackContent");

    const indicator = document.getElementById("pageIndicator");

    function buildPageHTML(pageObj) {
      if (!pageObj || pageObj.layout === "blank") {
        return `<div style="height:100%;"></div>`;
      }

      let layoutClass = "";
      if (pageObj.layout === "top-center") layoutClass = "layout-top-center";
      if (pageObj.layout === "side-right") layoutClass = "layout-side-right";
      if (pageObj.layout === "side-left") layoutClass = "layout-side-left";
      if (pageObj.layout === "bottom-left") layoutClass = "layout-bottom-left";
      if (pageObj.layout === "bottom-right") layoutClass = "layout-bottom-right";
      if (pageObj.layout === "two-photos") layoutClass = "layout-two-photos";

      let photosHTML = "";

      if (pageObj.photos.length === 1) {
        photosHTML = `
          <div class="photo-wrap" style="transform: rotate(${Math.random() * 6 - 3}deg);">
            <img class="photo" src="${pageObj.photos[0]}" alt="memory">
          </div>
        `;
      }

      if (pageObj.photos.length === 2) {
        photosHTML = `
          <div class="photo-wrap" style="transform: rotate(5deg);">
            <img class="photo" src="${pageObj.photos[0]}" alt="memory">
          </div>
          <div class="photo-wrap second" style="transform: rotate(-6deg);">
            <img class="photo small" src="${pageObj.photos[1]}" alt="memory">
          </div>
        `;
      }

      return `
        <div class="${layoutClass}" style="height:100%; display:flex; flex-direction:column;">
          <div class="page-title">${pageObj.title}</div>

          ${pageObj.layout === "side-right" || pageObj.layout === "side-left"
            ? `
              <div style="display:flex; gap:18px; flex:1;">
                ${pageObj.layout === "side-left" ? photosHTML : ""}
                <div class="page-text">${pageObj.text}</div>
                ${pageObj.layout === "side-right" ? photosHTML : ""}
              </div>
            `
            : `
              ${pageObj.layout === "top-center" ? photosHTML : ""}
              <div class="page-text">${pageObj.text}</div>
              ${pageObj.layout === "bottom-left" || pageObj.layout === "bottom-right" || pageObj.layout === "two-photos"
                ? photosHTML
                : ""}
            `
          }
        </div>
      `;
    }

    function renderSpread(spreadIndex) {
      const spread = spreads[spreadIndex];

      const leftIndex = spread[0];
      const rightIndex = spread[1];

      leftContent.innerHTML = buildPageHTML(leftIndex !== null ? pages[leftIndex] : null);
      rightContent.innerHTML = buildPageHTML(rightIndex !== null ? pages[rightIndex] : null);

      indicator.innerText = `Spread ${spreadIndex + 1} / ${spreads.length}`;
    }

    function nextSpread() {
      if (flipping) return;
      if (currentSpread >= spreads.length - 1) return;

      flipping = true;

      // Prepare flip page animation
      flipPage.style.display = "block";
      flipPage.classList.remove("flipping");

      // Front = current right page
      flipFrontContent.innerHTML = rightContent.innerHTML;

      // Back = next left page
      const nextSpreadIndex = currentSpread + 1;
      const nextLeftIndex = spreads[nextSpreadIndex][0];
      flipBackContent.innerHTML = buildPageHTML(nextLeftIndex !== null ? pages[nextLeftIndex] : null);

      // Animate
      setTimeout(() => {
        flipPage.classList.add("flipping");
      }, 50);

      setTimeout(() => {
        currentSpread++;
        renderSpread(currentSpread);

        flipPage.style.display = "none";
        flipping = false;
      }, 950);
    }

    function prevSpread() {
      if (flipping) return;
      if (currentSpread <= 0) return;

      // For simplicity, no reverse flip animation (still smooth)
      currentSpread--;
      renderSpread(currentSpread);
    }

    function openDiary() {
      document.getElementById("coverScreen").style.display = "none";
      document.getElementById("bookWrapper").style.display = "block";

      renderSpread(currentSpread);

      // Try autoplay music (will work after click)
      music.play().catch(() => {});
    }

    /* ---------- SWIPE SUPPORT ---------- */
    let startX = 0;
    let endX = 0;

    document.getElementById("bookWrapper").addEventListener("touchstart", (e) => {
      startX = e.touches[0].clientX;
    });

    document.getElementById("bookWrapper").addEventListener("touchend", (e) => {
      endX = e.changedTouches[0].clientX;

      if (startX - endX > 60) {
        nextSpread();
      } else if (endX - startX > 60) {
        prevSpread();
      }
    });

    /* ---------- DESKTOP SWIPE (mouse drag) ---------- */
    let mouseDown = false;

    document.getElementById("bookWrapper").addEventListener("mousedown", (e) => {
      mouseDown = true;
      startX = e.clientX;
    });

    document.getElementById("bookWrapper").addEventListener("mouseup", (e) => {
      if (!mouseDown) return;
      mouseDown = false;

      endX = e.clientX;

      if (startX - endX > 80) {
        nextSpread();
      } else if (endX - startX > 80) {
        prevSpread();
      }
    });
  </script>

</body>
</html>
