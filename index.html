<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Promise Diary for Ruchi üìñ‚ù§Ô∏è</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Homemade+Apple&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">

  <!-- PageFlip Library -->
  <script src="https://cdn.jsdelivr.net/npm/page-flip/dist/js/page-flip.browser.min.js"></script>

  <style>
    body {
      margin: 0;
      padding: 0;
      background: #2b1d14;
      font-family: "Inter", sans-serif;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      color: #2a1b12;
    }

    /* ---------- COVER SCREEN ---------- */
    .cover-screen {
      position: absolute;
      inset: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      background: radial-gradient(circle at top, #3a2619, #1b100a);
      z-index: 20;
      flex-direction: column;
      padding: 20px;
      text-align: center;
    }

    .cover-book {
      width: 320px;
      height: 440px;
      background: linear-gradient(145deg, #5a2f1a, #2d140a);
      border-radius: 18px;
      box-shadow: 0px 25px 60px rgba(0,0,0,0.7);
      border: 2px solid rgba(255,255,255,0.15);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
      overflow: hidden;
    }

    .cover-book::before {
      content: "";
      position: absolute;
      inset: 0;
      background: url("https://www.transparenttextures.com/patterns/leather.png");
      opacity: 0.25;
    }

    .cover-title {
      font-family: "Homemade Apple", cursive;
      font-size: 1.9rem;
      color: #f4d7a4;
      z-index: 2;
      margin-bottom: 10px;
    }

    .cover-sub {
      font-size: 1rem;
      color: rgba(244, 215, 164, 0.85);
      z-index: 2;
      margin-top: 5px;
    }

    .open-btn {
      margin-top: 25px;
      padding: 14px 28px;
      border: none;
      border-radius: 40px;
      background: #f4d7a4;
      color: #1b100a;
      font-weight: 600;
      cursor: pointer;
      font-size: 1rem;
      transition: 0.3s;
      box-shadow: 0px 12px 25px rgba(0,0,0,0.6);
    }

    .open-btn:hover {
      transform: scale(1.06);
      background: #ffdcae;
    }

    /* ---------- BOOK WRAPPER ---------- */
    .book-wrapper {
      width: 95%;
      max-width: 500px;
      height: 560px;
      display: none;
      position: relative;
    }

    #bookContainer {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

/* ---------- PAGE BASE ---------- */
.page {
  position: relative;
  overflow: hidden;
  border-radius: 12px;
  box-shadow:
    0px 12px 28px rgba(0,0,0,0.35),
    inset 0px 0px 20px rgba(0,0,0,0.08);
}

/* ---------- COVER PAGE (leather, NOT ruled) ---------- */
.page.cover-page {
  background: linear-gradient(145deg, #5a2f1a, #2d140a);
  border: 2px solid rgba(255,255,255,0.12);
}

.page.cover-page::before {
  content: "";
  position: absolute;
  inset: 0;
  background: url("https://www.transparenttextures.com/patterns/leather.png");
  opacity: 0.28;
  pointer-events: none;
}

.page.cover-page::after {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at top, rgba(255,255,255,0.12), transparent 60%);
  opacity: 0.4;
  pointer-events: none;
}

/* ---------- INSIDE PAGES (ruled diary) ---------- */
.page.inner-page {
  background: #fbf6e9;
  border: 1px solid rgba(0,0,0,0.14);
}

/* paper fiber texture */
.page.inner-page::before {
  content: "";
  position: absolute;
  inset: 0;
  background: url("https://www.transparenttextures.com/patterns/paper-fibers.png");
  opacity: 0.38;
  pointer-events: none;
}

/* ruled teal lines + red margin line */
.page.inner-page::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image:
    repeating-linear-gradient(
      to bottom,
      rgba(0, 120, 160, 0.22) 0px,
      rgba(0, 120, 160, 0.22) 1px,
      transparent 1px,
      transparent 32px
    ),
    linear-gradient(
      to right,
      rgba(220, 60, 60, 0.28) 2px,
      transparent 2px
    );
  background-size: 100% 32px, 2px 100%;
  background-position: 0px 75px, 55px 0px;
  pointer-events: none;
  opacity: 1;
}

/* ---------- PAGE INNER ---------- */
.page-inner {
  height: 100%;
  box-sizing: border-box;
  position: relative;
  z-index: 5;
  padding: 72px 28px 55px;
}

/* cover page inner */
.cover-inner {
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  padding: 40px 25px;
  color: #f4d7a4;
}

.cover-inner h1 {
  font-family: "Homemade Apple", cursive;
  font-size: 2rem;
  margin: 0;
}

.cover-inner p {
  font-size: 1rem;
  margin-top: 15px;
  opacity: 0.85;
}

/* ---------- HANDWRITTEN TEXT ---------- */
.page-title {
  font-family: "Homemade Apple", cursive;
  font-size: 1.35rem;
  margin-bottom: 16px;
  color: rgba(25, 15, 10, 0.92);
}

.page-text {
  font-family: "Homemade Apple", cursive;
  font-size: 1.08rem;
  line-height: 2.05;
  color: rgba(20, 12, 10, 0.92);
  white-space: pre-line;

  /* pen ink effect */
  text-shadow:
    0px 0px 0.8px rgba(0,0,0,0.25),
    0px 0px 1.4px rgba(0,0,0,0.12);
}

/* watermark */
.watermark {
  position: absolute;
  top: 14px;
  right: 16px;
  font-family: "Homemade Apple", cursive;
  font-size: 0.9rem;
  opacity: 0.22;
  color: rgba(0, 60, 120, 0.55);
  pointer-events: none;
  z-index: 6;
}

/* page number */
.page-number {
  position: absolute;
  bottom: 14px;
  right: 18px;
  font-family: "Inter", sans-serif;
  font-size: 0.8rem;
  opacity: 0.55;
  color: rgba(0, 0, 0, 0.7);
  pointer-events: none;
  z-index: 6;
}

/* ---------- DOODLES (BLUE INK SVG) ---------- */
.doodle-svg {
  position: absolute;
  width: 78px;
  height: 78px;
  opacity: 0.55;
  pointer-events: none;
  z-index: 4;
  stroke: rgba(0, 70, 150, 0.85);
  fill: none;
  stroke-width: 2.2;
  stroke-linecap: round;
  stroke-linejoin: round;
  filter: drop-shadow(0px 0px 0.8px rgba(0,0,0,0.1));
}

/* ink smudge */
.ink-smudge {
  position: absolute;
  width: 140px;
  height: 110px;
  background: radial-gradient(circle, rgba(0,70,150,0.18), transparent 70%);
  opacity: 0.12;
  border-radius: 50%;
  pointer-events: none;
  z-index: 2;
  transform: rotate(-12deg);
}

/* mobile */
@media(max-width: 600px) {
  .page-inner {
    padding: 70px 18px 50px;
  }

  .page-text {
    font-size: 0.98rem;
  }
                      }
    /* ---------- CONTROLS ---------- */
    .controls {
      position: absolute;
      bottom: -60px;
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 10px;
      color: rgba(255,255,255,0.8);
      font-size: 0.9rem;
      user-select: none;
    }

    .nav-btn {
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.25);
      color: rgba(255,255,255,0.85);
      padding: 10px 18px;
      border-radius: 30px;
      cursor: pointer;
      transition: 0.25s;
      font-weight: 500;
    }

    .nav-btn:hover {
      background: rgba(255,255,255,0.2);
    }

    .hint {
      position: absolute;
      top: -38px;
      width: 100%;
      text-align: center;
      color: rgba(255,255,255,0.8);
      font-size: 0.9rem;
    }

  
  </style>
</head>

<body>

  <!-- Background Music -->
  <audio id="bgMusic" loop>
    <source src="music.mp3" type="audio/mpeg">
  </audio>

  <!-- Cover Screen -->
  <div class="cover-screen" id="coverScreen">
    <div class="cover-book">
      <div class="cover-title">Promise Diary</div>
      <div class="cover-sub">For Ruchi ‚ù§Ô∏è</div>
      <div class="cover-sub" style="margin-top:12px;">‚Äî By Yash</div>
    </div>

    <button class="open-btn" onclick="openDiary()">Open the Diary üìñ</button>
  </div>

  <!-- Book -->
  <div class="book-wrapper" id="bookWrapper">

    <div class="hint">Swipe left/right to turn pages ‚ú®</div>

    <div id="bookContainer"></div>

    <div class="controls">
      <button class="nav-btn" onclick="goPrev()">‚¨Ö Back</button>
      <div id="pageIndicator">Page 1</div>
      <button class="nav-btn" onclick="goNext()">Next ‚û°</button>
    </div>

  </div>

  <script>
    const music = document.getElementById("bgMusic");

    // DOODLES (auto generated, no images needed)
    const doodles = ["‚ù§Ô∏è", "‚ú®", "üå∏", "üíç", "üß∏", "üåô", "‚≠ê", "üç´", "üíå", "üéÄ", "üåπ", "ü´∂"];

    const pages = [
      { title: "", text: "", layout: "cover" },
      { title: "Promise Diary", text: `For Ruchi ‚ù§Ô∏è\n\n‚Äî Yours, Yash`, type: "cover" },

      { title: "Promise #1", text: `Ruchi... I promise I‚Äôll always choose you. Even in chaos. Even in silence. Even in the hardest days. Always you.` },

      { title: "Promise #2", text: `I promise to always listen. Not just to your words... But to your moods. Your eyes. Your silence. Because you deserve to be understood.` },

      { title: "Promise #3", text: `Ruchi, I promise to make you laugh. Even when life feels heavy. And yes... I‚Äôll annoy you a little too üòå‚ù§Ô∏è` },

      { title: "Promise #4", text: `I promise to be proud of you. In every phase. In every version. Even when you doubt yourself... I won‚Äôt.` },

      { title: "Promise #5", text: `I promise to protect your peace. Not by controlling your world... But by being the calm inside it.` },

      { title: "Promise #6", text: `Ruchi... I promise that your happiness will never feel like a burden to me. I want to be part of it.` },

      { title: "Promise #7", text: `I promise I‚Äôll stay. Not only when things are cute... But also when things are messy. Because love is not temporary.` },

      { title: "Promise #8", text: `I promise to hold your hand. In public. In private. In every storm. Ruchi, you won‚Äôt walk alone.` },

      { title: "Promise #9", text: `I promise to love you softly. Not loudly. Not dramatically. But in a way that feels safe. And forever.` },

      { title: "Promise #10", text: `Ruchi...My final promise is simple: I will never stop loving you. Not today. Not tomorrow. Not in any lifetime. ‚Äî Yours, Yash ‚ù§Ô∏è` },

      { title: "", text: "" },
      { title: "", text: "" },
      { title: "", text: "" },

      { title: "", text: `More promises will be written soon‚Ä¶ ‚úçÔ∏è‚ù§Ô∏è` }
    ];

    function randomBetween(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function buildPageHTML(pageObj, index) {

  // cover page
  if (pageObj.layout === "cover") {
    return `
      <div class="cover-inner">
        <h1>Promise Diary</h1>
        <p>For Ruchi ‚ù§Ô∏è</p>
        <p style="margin-top:18px;">‚Äî By Yash ‚úçÔ∏è</p>
      </div>
    `;
  }

  // blank page
  if (!pageObj || pageObj.layout === "blank") {
    return `
      <div class="page-inner">
        <div class="watermark">Ruchi üíå</div>
        <div class="page-number">${index + 1}</div>
      </div>
    `;
  }

  // random safe text block shift (looks natural)
  const padLeft = randomBetween(5, 22);
  const padTop = randomBetween(0, 18);

  // doodles must NOT overlap text:
  // So we place doodles near top-right / bottom-left safe zones only.
  const doodlePositions = [
    { top: 95, left: 255 },
    { top: 135, left: 40 },
    { top: 360, left: 260 },
    { top: 410, left: 55 }
  ];

  const chosen = doodlePositions[Math.floor(Math.random() * doodlePositions.length)];

  const doodleHTML = generateDoodleSVG(chosen.top, chosen.left);

  // ink smudge subtle
  const smudgeHTML = `
    <div class="ink-smudge" style="top:${randomBetween(220, 380)}px; left:${randomBetween(30, 180)}px;"></div>
  `;

  return `
    <div class="page-inner">
      <div class="watermark">Ruchi üíå</div>
      ${smudgeHTML}

      <div style="padding-left:${padLeft}px; padding-top:${padTop}px;">
        <div class="page-title">${pageObj.title}</div>
        <div class="page-text">${pageObj.text}</div>
      </div>

      ${doodleHTML}
      <div class="page-number">${index + 1}</div>
    </div>
  `;
    }

    function randomBetween(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function generateDoodleSVG(top, left) {
  const doodles = [
    // heart doodle
    `<path d="M40 65 C20 50, 10 35, 20 25 C28 15, 40 20, 40 30 C40 20, 55 15, 60 25 C70 38, 55 52, 40 65 Z"/>`,

    // flower doodle
    `<circle cx="40" cy="40" r="6"/>
     <path d="M40 12 C34 20, 34 28, 40 30 C46 28, 46 20, 40 12 Z"/>
     <path d="M68 40 C60 34, 52 34, 50 40 C52 46, 60 46, 68 40 Z"/>
     <path d="M40 68 C34 60, 34 52, 40 50 C46 52, 46 60, 40 68 Z"/>
     <path d="M12 40 C20 34, 28 34, 30 40 C28 46, 20 46, 12 40 Z"/>`,

    // star doodle
    `<path d="M40 10 L48 32 L72 32 L52 46 L60 70 L40 55 L20 70 L28 46 L8 32 L32 32 Z"/>`,

    // cloud doodle
    `<path d="M20 55 C10 55, 10 40, 22 40 C25 28, 40 25, 45 35 C55 28, 68 35, 62 48 C72 48, 72 62, 58 62 L22 62 C16 62, 14 55, 20 55 Z"/>`,

    // cute swirl
    `<path d="M22 45 C22 30, 45 25, 52 40 C58 55, 35 62, 30 48 C25 36, 48 32, 58 44"/>`
  ];

  const chosen = doodles[Math.floor(Math.random() * doodles.length)];

  return `
    <svg class="doodle-svg" style="top:${top}px; left:${left}px;" viewBox="0 0 80 80">
      ${chosen}
    </svg>
  `;
}
    
    let pageFlip;

    function renderBook() {
      const container = document.getElementById("bookContainer");
      container.innerHTML = "";

     pages.forEach((p, index) => {
  const pageDiv = document.createElement("div");

  if (p.layout === "cover") {
    pageDiv.className = "page cover-page";
    pageDiv.innerHTML = buildPageHTML(p, index);
  } else {
    pageDiv.className = "page inner-page";
    pageDiv.innerHTML = buildPageHTML(p, index);
  }

  container.appendChild(pageDiv);
});

      pageFlip = new St.PageFlip(container, {
        width: 360,
        height: 520,
        size: "stretch",
        minWidth: 320,
        maxWidth: 500,
        minHeight: 450,
        maxHeight: 600,
        maxShadowOpacity: 0.45,
        showCover: true,
        mobileScrollSupport: false,
        useMouseEvents: true,
        flippingTime: 850
      });

      pageFlip.loadFromHTML(document.querySelectorAll("#bookContainer .page"));

      pageFlip.on("flip", (e) => {
        document.getElementById("pageIndicator").innerText =
          `Page ${e.data + 1} / ${pages.length}`;
      });
    }

    function goNext() {
      if (pageFlip) pageFlip.flipNext();
    }

    function goPrev() {
      if (pageFlip) pageFlip.flipPrev();
    }

    function openDiary() {
      document.getElementById("coverScreen").style.display = "none";
      document.getElementById("bookWrapper").style.display = "block";

      renderBook();

      music.play().catch(() => {});
    }
  </script>

</body>
</html>
